var $$={getJSON:function(a,b,c,d){a+="&"+c+"=jsonp"+Math.floor(1e6*Math.random());var e="",f=this.getQueryString(a)[c];for(var g in b)e+="&"+g+"="+encodeURIComponent(b[g]);a+=e,window[f]=function(a){window[f]=void 0;try{delete window[f]}catch(b){}h&&h.removeChild(i),d(a)};var h=document.getElementsByTagName("head")[0],i=document.createElement("script");return i.charset="UTF-8",i.src=a,i.async=!0,h.appendChild(i),!0},getQueryString:function(a){for(var b,c={},d=a&&-1!=a.indexOf("?")&&a.split("?")[1]||location.search.substring(1),e=/([^&=]+)=([^&]*)/g;b=e.exec(d);)c[decodeURIComponent(b[1])]=decodeURIComponent(b[2]);return c}};Array.prototype.in_array=function(a){for(var b=0;b<this.length;b++)if(this[b]==a)return!0;return!1},Array.prototype.indexOf=function(a){for(var b=0;b<this.length;b++)if(this[b]==a)return b;return-1},String.prototype.format=function(){if(0==arguments.length)return null;for(var a=arguments[0],b=1;b<arguments.length;b++){var c=new RegExp("\\{"+(b-1)+"\\}","gm");a=a.replace(c,arguments[b])}return a},String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")},String.prototype.trimAll=function(){return this.replace(/\s+/g,"")};var FlymeStr=new String,Flyme=window.Flyme||{timer:void 0,execTime:0,timerCallback:void 0,addEvent:function(a,b,c){a&&(a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c)},delEvt:function(a,b,c){a&&(a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c))},isURL:function(a){var b=/^\b(((https?|http):\/\/)?[-a-z0-9]+(\.[-a-z0-9]+)*\.(?:com|edu|gov|int|mil|net|org|biz|info|name|museum|asia|coop|aero|[a-z][a-z]|((25[0-5])|(2[0-4]\d)|(1\d\d)|([1-9]\d)|\d))\b(\/[-a-z0-9_:\@&?=+,.!\/~%\$]*)?)$/i;return b.test(a)?!0:!1},isEmail:function(a){var b=a.match(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/);return null==b?!1:!0},checkMobile:function(a){return/^1[3|4|5|7|8][0-9]\d{8}$/.test(a)?!0:!1},isEmptyObj:function(a){if(void 0===a)return!0;for(v in a)if(a.hasOwnProperty(v))return!1;return!0},isNull:function(a){return void 0===a||""===a.trim()?!0:!1},showMsg:function(a){alert(a)},logJson:function(a){this.isDebug()&&console.log(JSON.stringify(a))},isDebug:function(){var a=location.href;return-1!=a.indexOf("feiliu.com")?!1:!0},formatDate:function(a){var b=new Date(a),c=b.getFullYear(),d=b.getMonth()+1<10?"0"+(b.getMonth()+1):b.getMonth()+1,e=b.getDate();return c+"-"+d+"-"+e},validatePhone:function(a,b){a=a.trimAll();var c=/^(13|14|15|17|18)[0-9]{9}$/;return b&&this.isNull(a)?(this.showMsg("请输入手机号码"),!1):this.isNull(a)||c.test(a)?!0:(this.showMsg("请输入正确的手机号码"),!1)},newScheduledTask:function(a,b,c){this.execTime=a,this.timerCallback=c,this.timer=window.setInterval("Flyme.timeDownSelector()",1e3*b)},timeDownSelector:function(){return this.execTime>1?(this.execTime--,void(this.timerCallback&&this.timerCallback(this.execTime))):(window.clearInterval(this.timer),void(this.timer=void 0))},validateDynamicCode:function(a){return this.isNull(a)?(this.showErrorMsg("请输入手机动态码"),!1):/[0-9]{6}/.test(a)?!0:(this.showErrorMsg("手机动态码必须为6位数字"),!1)},wxShareInit:function(a,b,c,d,e){if(window.wx){if(Flyme.isNull(b))return Flyme.logJson("wxchntype is NULL"),null;if("C1"===b.trim()&&Flyme.isNull(d))return void Flyme.logJson("openid is NULL");Flyme.loadSignAPI(a,b,c,d,Flyme.signAPICallback),e?Flyme.defineShareAPI(e,Flyme.shareConfigSettings):Flyme.loadShareAPI(c,d,Flyme.shareConfigSettings)}else Flyme.isDebug()&&alert("请引入依赖的微信js代码库")},loadSignAPI:function(a,b,c,d,e){var f=encodeURIComponent(location.href.split("#")[0]);$$.getJSON(FlymeStr.format(Flyme.signAPIUrl(),b,c,d,f),{},"callback",function(b){null==b&&(b={}),b.appid=a,e&&e(b)})},loadShareAPI:function(a,b,c){$$.getJSON(FlymeStr.format(Flyme.shareAPIUrl(),a,b),{},"callback",function(a){null==a&&(a={}),a.openid=b,c&&c(a)})},defineShareAPI:function(a,b){a&&b(a)},shareSuccess:function(a,b,c){$$.getJSON(FlymeStr.format(Flyme.setShareInfoUrl(),a,b,c),{},"callback",function(a){a||(a={}),1!==a.status&&alert("分享失败")})},signAPICallback:function(a){Flyme.wxObjConfigInit(a)},wxObjConfigInit:function(a){wx.config({debug:!1,appId:a.appid,timestamp:a.timestamp,nonceStr:a.nonceStr,signature:a.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","startRecord","stopRecord","onVoiceRecordEnd","playVoice","pauseVoice","stopVoice","onVoicePlayEnd","uploadVoice","downloadVoice","chooseImage","previewImage","uploadImage","downloadImage","translateVoice","getNetworkType","openLocation","getLocation","hideOptionMenu","showOptionMenu","hideMenuItems","showMenuItems","hideAllNonBaseMenuItem","showAllNonBaseMenuItem","closeWindow","scanQRCode","chooseWXPay","openProductSpecificView","addCard","chooseCard","openCard"]})},signAPIUrl:function(){return"http://admin-weixin.feiliu.com/wxshare/getSignature?wxchntype={0}&shareid={1}&openid={2}&url={3}"},shareAPIUrl:function(){return"http://admin-weixin.feiliu.com/wxshare/getShareSettings?shareid={0}&openid={1}"},setShareInfoUrl:function(){return"http://admin-weixin.feiliu.com/wxshare/setShareInfo?shareid={0}&stype={1}&openid={2}"},shareConfigSettings:function(a){return a&&a.id&&a.link&&a.imgUrl&&a.title&&a.desc?void(window.wx&&wx.ready(function(){wx.onMenuShareTimeline({link:a.link,imgUrl:a.imgUrl,title:a.title,trigger:function(){},success:function(){Flyme.shareSuccess(a.id,1,a.openid)},cancel:function(){},fail:function(){}}),wx.onMenuShareAppMessage({link:a.link,imgUrl:a.imgUrl,title:a.title,desc:a.desc,trigger:function(){},success:function(){Flyme.shareSuccess(a.id,2,a.openid)},cancel:function(){},fail:function(){}}),wx.onMenuShareQQ({title:a.title,desc:a.desc,link:a.link,imgUrl:a.imgUrl,trigger:function(){},complete:function(){},success:function(){Flyme.shareSuccess(a.id,3,a.openid)},cancel:function(){},fail:function(){}}),wx.onMenuShareWeibo({title:a.title,desc:a.desc,link:a.link,imgUrl:a.imgUrl,trigger:function(){},complete:function(){},success:function(){Flyme.shareSuccess(a.id,4,a.openid)},cancel:function(){},fail:function(){}})})):void Flyme.logJson("Response settings ERROR:{id,link,imgUrl,title,desc}")},htmlEncode:function(a){return a.replace(/&/g,"&").replace(/\"/g,'"').replace(/</g,"<").replace(/>/g,">")},setCookie:function(a,b,c){var d=new Date,e=8,f=d.getTime()+6e4*d.getTimezoneOffset(),g=f+36e5*e,h=new Date(g);h.setTime(h.getTime()+60*c*60*1e3),document.cookie=a+"="+escape(b)+";path=/;expires="+h.toGMTString()+";domain=feiliu.com;"},getCookie:function(a){var b=document.cookie.match(new RegExp("(^| )"+a+"=([^;]*)(;|$)"));return null!=b?unescape(b[2]):null}};