"use strict";function lotChance(a,b,c){$$.getJSON(a,b,"callback",function(a){null===a&&(a={}),a.uid=b.uid,c&&c(a)})}function setPageInfo(a){document.getElementById("timesleft").innerHTML=a.timesleft,document.getElementById("shareval").innerHTML=a.shareDone}function showmsg(a){var b="",c="";a.timesleft<=0?(b="免费抽奖次数已用完",c=1===a.shareDone?a.creditsTotal<a.creditsConsume?"积分不足，赶快去社区发帖赚积分吧~":"使用积分还能增加抽奖机会哦":"分享活动还能获得一次抽奖机会哦"):location.href="play.html";var d="";d+='<div class="cont"><div class="res tc"><img class="res-ico" src="images/fail.png" alt=""><span class="res-words">'+b+'</span></div><div class="tips"><p class="row">'+c+'</p><p class="row">我的积分：<b class="credits">'+a.creditsTotal+'</b></p></div></div><div class="cbtn"><a href="javascript:;" class="cbtn-a cbtn-lft',a.creditsTotal<a.creditsConsume&&(d+=" disabled"),d+='">'+a.creditsConsume+'积分抽奖</a><a href="javascript:;" class="cbtn-a cbtn-rgt',1===a.shareDone&&(d+=" disabled"),d+='" id="sbtn">分享活动</a></div>',d+='<span class="close" id="close"><b>×</b></span>',popupObj.innerHTML=d,popupObj.style.display="block"}function gotoPlay(){var a={status:1,result:"",creditsTotal:122,creditsConsume:40,suc:0,przCont:"差一点就抽到了！",tips:""},b=document.getElementById("uid").value,c=document.getElementById("sign").value,d=document.getElementById("shareval").value,e=document.getElementById("timesleft").innerHTML;if(a.timesleft=e,a.shareDone=d,a.timesleft<=0){showmsg(a);var f={uid:b,timesleft:e,sign:c,sharedone:d};lotChance("http://",f,setPageInfo)}else location.href="play.html"}function overlayHandler(a){var b=a.target;if("sharelayer"===b.className||"shareimg"===b.className){var c="block"===shareLayer.style.display?"none":"block";shareLayer.style.display=c,overlayObj.style.display=c}}function popupHandler(a){var b=a.target;if("b"===b.nodeName.toLowerCase())return popupObj.style.display="none",void(overlayObj.style.display="none");if("sbtn"===b.id){var c="block"===shareLayer.style.display?"none":"block";return shareLayer.style.display=c,void(overlayObj.style.display=c)}}var $$={getJSON:function(a,b,c,d){a+="&"+c+"=jsonp"+Math.floor(1e6*Math.random());var e="",f=this.getQueryString(a)[c];for(var g in b)e+="&"+g+"="+encodeURIComponent(b[g]);a+=e,window[f]=function(a){window[f]=void 0;try{delete window[f]}catch(b){}h&&h.removeChild(i),d(a)};var h=document.getElementsByTagName("head")[0],i=document.createElement("script");return i.charset="UTF-8",i.src=a,i.async=!0,h.appendChild(i),!0},getQueryString:function(a){for(var b,c={},d=a&&-1!==a.indexOf("?")&&a.split("?")[1]||location.search.substring(1),e=/([^&=]+)=([^&]*)/g;b=e.exec(d);)c[decodeURIComponent(b[1])]=decodeURIComponent(b[2]);return c}},popupObj=document.getElementById("popup"),overlayObj=document.getElementById("overlay"),shareLayer=overlayObj.lastElementChild||overlayObj.lastChild,evtType="ontouchstart"in document.documentElement?"touchstart":"click";document.getElementById("playbtn").addEventListener(evtType,gotoPlay,!1),overlayObj.addEventListener(evtType,overlayHandler,!1),popupObj.addEventListener(evtType,popupHandler,!1);